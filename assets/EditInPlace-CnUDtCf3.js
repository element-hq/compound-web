import{j as t}from"./jsx-runtime-DoxjgJx5.js";import{c as a}from"./index-C2KoGaFq.js";import{r as n,a as _}from"./index-Cu9bd8lq.js";import{T as E}from"./Text-BTQEANK3.js";import{u as c}from"./useId-D5m2XpUu.js";import{S as x}from"./check-CXsFGzWm.js";import{S as V}from"./close-D55JIkKE.js";import{S as I}from"./error-YokBWoNX.js";const L="_container_1t6hl_17",R="_label_1t6hl_21",P="_controls_1t6hl_27",A="_button_1t6hl_33",D="_control_1t6hl_27",e={container:L,label:R,controls:P,"button-group":"_button-group_1t6hl_33",button:A,"primary-button":"_primary-button_1t6hl_52","primary-button-disabled":"_primary-button-disabled_1t6hl_61",control:D,"container-error":"_container-error_1t6hl_84","caption-line":"_caption-line_1t6hl_92","caption-icon":"_caption-icon_1t6hl_96","caption-icon-error":"_caption-icon-error_1t6hl_104","caption-icon-saved":"_caption-icon-saved_1t6hl_108","caption-text":"_caption-text_1t6hl_119","caption-text-error":"_caption-text-error_1t6hl_124","caption-text-saved":"_caption-text-saved_1t6hl_128"},v=n.forwardRef(function({className:g,label:j,onSave:u,onCancel:d,saveButtonLabel:N,cancelButtonLabel:S,disableSaveButton:p,error:l,savedLabel:m,...C},T){const r=c(),b=c(),h=c(),k=a(e.container,g,{[e["container-error"]]:!!l}),[q,s]=_.useState(!1),o=n.useRef(null),f=n.useRef(null),i=n.useRef(null);_.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]);const w=n.useCallback(async()=>{try{await u(),f.current?.blur(),s(!0),o.current=setTimeout(()=>{s(!1)},2e3)}catch{}},[s,u,o]),B=n.useCallback(()=>{i.current?.blur(),d()},[i,d]);return t.jsxs("div",{className:k,id:r,children:[t.jsx("div",{className:e.label,id:b,children:j}),t.jsxs("div",{className:e.controls,children:[t.jsx(E,{ref:T,...C,className:e.control,"aria-labelledby":b,"aria-invalid":!!l,"aria-errormessage":l?h:void 0}),t.jsxs("div",{className:e["button-group"],children:[t.jsx("button",{className:a(e.button,e["primary-button"],{[e["primary-button-disabled"]]:p}),ref:f,onClick:w,"aria-controls":r,"aria-label":N,disabled:p,children:t.jsx(x,{})}),t.jsx("button",{role:"button",ref:i,className:e.button,onClick:B,"aria-controls":r,"aria-label":S,children:t.jsx(V,{})})]})]}),l&&t.jsxs("div",{className:e["caption-line"],children:[t.jsx(I,{className:a(e["caption-icon"],e["caption-icon-error"])}),t.jsx("span",{id:h,className:a(e["caption-text"],e["caption-text-error"]),children:l})]}),m&&q&&t.jsxs("div",{className:e["caption-line"],children:[t.jsx("div",{className:a(e["caption-icon"],e["caption-icon-saved"]),children:t.jsx(x,{})}),t.jsx("span",{className:a(e["caption-text"],e["caption-text-saved"]),children:m})]})]})});try{v.displayName="EditInPlace",v.__docgenInfo={description:"A text box with save/cancel buttons that appear when the field is active",displayName:"EditInPlace",props:{label:{defaultValue:null,description:"The label for the control",name:"label",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"The content of the text box",name:"value",required:!1,type:{name:"string | (string & readonly string[])"}},className:{defaultValue:null,description:"The CSS class name.",name:"className",required:!1,type:{name:"string"}},enableLigatures:{defaultValue:null,description:`Enable contextual alternate ligatures on input text
For example on an in-place editing field
https://github.com/rsms/inter/issues/222
https://github.com/rsms/inter/blob/master/src/features/calt.fea`,name:"enableLigatures",required:!1,type:{name:"boolean"}},onSave:{defaultValue:null,description:"Callback for when the user confirms the change",name:"onSave",required:!0,type:{name:"() => Promise<void>"}},onCancel:{defaultValue:null,description:"Calback for when the user wishes to cancel the change",name:"onCancel",required:!0,type:{name:"() => void"}},saveButtonLabel:{defaultValue:null,description:"The label for the save button",name:"saveButtonLabel",required:!0,type:{name:"string"}},cancelButtonLabel:{defaultValue:null,description:"The label for the cancel button",name:"cancelButtonLabel",required:!1,type:{name:"string"}},disableSaveButton:{defaultValue:null,description:`True to disable the save button, false to enasble.
Default: false (enabled)`,name:"disableSaveButton",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:`Error message to be displayed below the box. If supplied, will disable the
save button.`,name:"error",required:!1,type:{name:"string"}},savedLabel:{defaultValue:null,description:`Label to be displayed by the green check at the bottom. Will only be displayed
for 2 seconds after the onSave callback promise resolves successfully.`,name:"savedLabel",required:!1,type:{name:"string"}}}}}catch{}export{v as E};
