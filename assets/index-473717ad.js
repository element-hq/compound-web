import{_ as F,a as j}from"./index-fc9b93e8.js";import{r as t}from"./index-8ee6c85d.js";import{$ as ne,a as R,b as U}from"./index-79556c5a.js";import{$ as A}from"./index-6e117a6c.js";const ae=t.forwardRef((e,o)=>t.createElement(A.label,F({},e,{ref:o,onMouseDown:r=>{var n;(n=e.onMouseDown)===null||n===void 0||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault()}}))),[q,Ve]=ne("Form"),J="Form",[se,S]=q(J),[ce,Q]=q(J),ie=t.forwardRef((e,o)=>{const{__scopeForm:r,onClearServerErrors:n=()=>{},...i}=e,d=t.useRef(null),v=j(o,d),[m,$]=t.useState({}),f=t.useCallback(s=>m[s],[m]),g=t.useCallback((s,c)=>$(l=>{var u;return{...l,[s]:{...(u=l[s])!==null&&u!==void 0?u:{},...c}}}),[]),_=t.useCallback(s=>{$(c=>({...c,[s]:void 0})),a(c=>({...c,[s]:{}}))},[]),[C,E]=t.useState({}),M=t.useCallback(s=>{var c;return(c=C[s])!==null&&c!==void 0?c:[]},[C]),b=t.useCallback((s,c)=>{E(l=>{var u;return{...l,[s]:[...(u=l[s])!==null&&u!==void 0?u:[],c]}})},[]),p=t.useCallback((s,c)=>{E(l=>{var u;return{...l,[s]:((u=l[s])!==null&&u!==void 0?u:[]).filter(T=>T.id!==c)}})},[]),[I,a]=t.useState({}),h=t.useCallback(s=>{var c;return(c=I[s])!==null&&c!==void 0?c:{}},[I]),y=t.useCallback((s,c)=>{a(l=>{var u;return{...l,[s]:{...(u=l[s])!==null&&u!==void 0?u:{},...c}}})},[]),[V,x]=t.useState({}),L=t.useCallback((s,c)=>{x(l=>{const u=new Set(l[s]).add(c);return{...l,[s]:u}})},[]),P=t.useCallback((s,c)=>{x(l=>{const u=new Set(l[s]);return u.delete(c),{...l,[s]:u}})},[]),w=t.useCallback(s=>{var c;return Array.from((c=V[s])!==null&&c!==void 0?c:[]).join(" ")||void 0},[V]);return t.createElement(se,{scope:r,getFieldValidity:f,onFieldValidityChange:g,getFieldCustomMatcherEntries:M,onFieldCustomMatcherEntryAdd:b,onFieldCustomMatcherEntryRemove:p,getFieldCustomErrors:h,onFieldCustomErrorsChange:y,onFieldValiditionClear:_},t.createElement(ce,{scope:r,onFieldMessageIdAdd:L,onFieldMessageIdRemove:P,getFieldDescription:w},t.createElement(A.form,F({},i,{ref:v,onInvalid:R(e.onInvalid,s=>{const c=X(s.currentTarget);c===s.target&&c.focus(),s.preventDefault()}),onSubmit:R(e.onSubmit,n,{checkForDefaultPrevented:!1}),onReset:R(e.onReset,n)}))))}),W="FormField",[de,G]=q(W),le=t.forwardRef((e,o)=>{const{__scopeForm:r,name:n,serverInvalid:i=!1,...d}=e,m=S(W,r).getFieldValidity(n),$=U();return t.createElement(de,{scope:r,id:$,name:n,serverInvalid:i},t.createElement(A.div,F({"data-valid":N(m,i),"data-invalid":K(m,i)},d,{ref:o})))}),z="FormLabel",ue=t.forwardRef((e,o)=>{const{__scopeForm:r,...n}=e,i=S(z,r),d=G(z,r),v=n.htmlFor||d.id,m=i.getFieldValidity(d.name);return t.createElement(ae,F({"data-valid":N(m,d.serverInvalid),"data-invalid":K(m,d.serverInvalid)},n,{ref:o,htmlFor:v}))}),O="FormControl",me=t.forwardRef((e,o)=>{const{__scopeForm:r,...n}=e,i=S(O,r),d=G(O,r),v=Q(O,r),m=t.useRef(null),$=j(o,m),f=n.name||d.name,g=n.id||d.id,_=i.getFieldCustomMatcherEntries(f),{onFieldValidityChange:C,onFieldCustomErrorsChange:E,onFieldValiditionClear:M}=i,b=t.useCallback(async a=>{if(Y(a.validity)){const l=B(a.validity);C(f,l);return}const h=a.form?new FormData(a.form):new FormData,y=[a.value,h],V=[],x=[];_.forEach(l=>{ge(l,y)?x.push(l):be(l)&&V.push(l)});const L=V.map(({id:l,match:u})=>[l,u(...y)]),P=Object.fromEntries(L),w=Object.values(P).some(Boolean),s=w;a.setCustomValidity(s?D:"");const c=B(a.validity);if(C(f,c),E(f,P),!w&&x.length>0){const l=x.map(({id:te,match:re})=>re(...y).then(oe=>[te,oe])),u=await Promise.all(l),T=Object.fromEntries(u),Z=Object.values(T).some(Boolean);a.setCustomValidity(Z?D:"");const ee=B(a.validity);C(f,ee),E(f,T)}},[_,f,E,C]);t.useEffect(()=>{const a=m.current;if(a){const h=()=>b(a);return a.addEventListener("change",h),()=>a.removeEventListener("change",h)}},[b]);const p=t.useCallback(()=>{const a=m.current;a&&(a.setCustomValidity(""),M(f))},[f,M]);t.useEffect(()=>{var a;const h=(a=m.current)===null||a===void 0?void 0:a.form;if(h)return h.addEventListener("reset",p),()=>h.removeEventListener("reset",p)},[p]),t.useEffect(()=>{const a=m.current,h=a==null?void 0:a.closest("form");if(h&&d.serverInvalid){const y=X(h);y===a&&y.focus()}},[d.serverInvalid]);const I=i.getFieldValidity(f);return t.createElement(A.input,F({"data-valid":N(I,d.serverInvalid),"data-invalid":K(I,d.serverInvalid),"aria-invalid":d.serverInvalid?!0:void 0,"aria-describedby":v.getFieldDescription(f),title:""},n,{ref:$,id:g,name:f,onInvalid:R(e.onInvalid,a=>{const h=a.currentTarget;b(h)}),onChange:R(e.onChange,a=>{p()})}))}),D="This value is not valid",fe={badInput:D,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},k="FormMessage",ve=t.forwardRef((e,o)=>{const{match:r,name:n,...i}=e,d=G(k,e.__scopeForm),v=n??d.name;return r===void 0?t.createElement(H,F({},i,{ref:o,name:v}),e.children||D):typeof r=="function"?t.createElement(he,F({match:r},i,{ref:o,name:v})):t.createElement($e,F({match:r},i,{ref:o,name:v}))}),$e=t.forwardRef((e,o)=>{const{match:r,forceMatch:n=!1,name:i,children:d,...v}=e,$=S(k,v.__scopeForm).getFieldValidity(i);return n||($==null?void 0:$[r])?t.createElement(H,F({ref:o},v,{name:i}),d??fe[r]):null}),he=t.forwardRef((e,o)=>{const{match:r,forceMatch:n=!1,name:i,id:d,children:v,...m}=e,$=S(k,m.__scopeForm),f=t.useRef(null),g=j(o,f),_=U(),C=d??_,E=t.useMemo(()=>({id:C,match:r}),[C,r]),{onFieldCustomMatcherEntryAdd:M,onFieldCustomMatcherEntryRemove:b}=$;t.useEffect(()=>(M(i,E),()=>b(i,E.id)),[E,i,M,b]);const p=$.getFieldValidity(i),a=$.getFieldCustomErrors(i)[C];return n||p&&!Y(p)&&a?t.createElement(H,F({id:C,ref:g},m,{name:i}),v??D):null}),H=t.forwardRef((e,o)=>{const{__scopeForm:r,id:n,name:i,...d}=e,v=Q(k,r),m=U(),$=n??m,{onFieldMessageIdAdd:f,onFieldMessageIdRemove:g}=v;return t.useEffect(()=>(f(i,$),()=>g(i,$)),[i,$,f,g]),t.createElement(A.span,F({id:$},d,{ref:o}))}),Ce=t.forwardRef((e,o)=>{const{__scopeForm:r,...n}=e;return t.createElement(A.button,F({type:"submit"},n,{ref:o}))});function B(e){const o={};for(const r in e)o[r]=e[r];return o}function Fe(e){return e instanceof HTMLElement}function Ee(e){return"validity"in e}function pe(e){return Ee(e)&&(e.validity.valid===!1||e.getAttribute("aria-invalid")==="true")}function X(e){const o=e.elements,[r]=Array.from(o).filter(Fe).filter(pe);return r}function ge(e,o){return e.match.constructor.name==="AsyncFunction"||ye(e.match,o)}function be(e){return e.match.constructor.name==="Function"}function ye(e,o){return e(...o)instanceof Promise}function Y(e){let o=!1;for(const r in e){const n=r;if(n!=="valid"&&n!=="customError"&&e[n]){o=!0;break}}return o}function N(e,o){if((e==null?void 0:e.valid)===!0&&!o)return!0}function K(e,o){if((e==null?void 0:e.valid)===!1||o)return!0}const Re=ie,De=le,Se=ue,Pe=me,we=ve,Te=Ce;export{Pe as $,ie as a,Re as b,De as c,Se as d,we as e,Te as f};
//# sourceMappingURL=index-473717ad.js.map
