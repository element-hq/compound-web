import{j as g,a as oe}from"./jsx-runtime-9a6f6fa0.js";import{_}from"./extends-98964cd2.js";import{r as o,a as Ee}from"./index-f1f749bf.js";import"./index-96c5f47c.js";import{c as S}from"./index-2e4736b8.js";import{B as ge}from"./Button-e7e309a9.js";import"./_commonjsHelpers-042e6b4d.js";function T(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function xe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ue(...e){return t=>e.forEach(n=>xe(n,t))}function Q(...e){return o.useCallback(ue(...e),e)}function Me(e,t=[]){let n=[];function r(s,i){const c=o.createContext(i),m=n.length;n=[...n,i];function p(F){const{scope:v,children:C,...y}=F,x=(v==null?void 0:v[e][m])||c,E=o.useMemo(()=>y,Object.values(y));return o.createElement(x.Provider,{value:E},C)}function b(F,v){const C=(v==null?void 0:v[e][m])||c,y=o.useContext(C);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${F}\` must be used within \`${s}\``)}return p.displayName=s+"Provider",[p,b]}const a=()=>{const s=n.map(i=>o.createContext(i));return function(c){const m=(c==null?void 0:c[e])||s;return o.useMemo(()=>({[`__scope${e}`]:{...c,[e]:m}}),[c,m])}};return a.scopeName=e,[r,we(a,...t)]}function we(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const i=r.reduce((c,{useScope:m,scopeName:p})=>{const F=m(s)[`__scope${p}`];return{...c,...F}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}const Ie=Boolean(globalThis==null?void 0:globalThis.document)?o.useLayoutEffect:()=>{},Se=Ee["useId".toString()]||(()=>{});let Ve=0;function W(e){const[t,n]=o.useState(Se());return Ie(()=>{e||n(r=>r??String(Ve++))},[e]),e||(t?`radix-${t}`:"")}const me=o.forwardRef((e,t)=>{const{children:n,...r}=e,a=o.Children.toArray(n),s=a.find(Re);if(s){const i=s.props.children,c=a.map(m=>m===s?o.Children.count(i)>1?o.Children.only(null):o.isValidElement(i)?i.props.children:null:m);return o.createElement(z,_({},r,{ref:t}),o.isValidElement(i)?o.cloneElement(i,void 0,c):null)}return o.createElement(z,_({},r,{ref:t}),n)});me.displayName="Slot";const z=o.forwardRef((e,t)=>{const{children:n,...r}=e;return o.isValidElement(n)?o.cloneElement(n,{...Ae(r,n.props),ref:ue(t,n.ref)}):o.Children.count(n)>1?o.Children.only(null):null});z.displayName="SlotClone";const Ne=({children:e})=>o.createElement(o.Fragment,null,e);function Re(e){return o.isValidElement(e)&&e.type===Ne}function Ae(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...c)=>{s(...c),a(...c)}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}const Pe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],V=Pe.reduce((e,t)=>{const n=o.forwardRef((r,a)=>{const{asChild:s,...i}=r,c=s?me:t;return o.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),o.createElement(c,_({},i,{ref:a}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Te=o.forwardRef((e,t)=>o.createElement(V.label,_({},e,{ref:t,onMouseDown:n=>{var r;(r=e.onMouseDown)===null||r===void 0||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),[X,Ft]=Me("Form"),fe="Form",[De,N]=X(fe),[Le,pe]=X(fe),ke=o.forwardRef((e,t)=>{const{__scopeForm:n,onClearServerErrors:r=()=>{},...a}=e,s=o.useRef(null),i=Q(t,s),[c,m]=o.useState({}),p=o.useCallback(d=>c[d],[c]),b=o.useCallback((d,u)=>m(f=>{var $;return{...f,[d]:{...($=f[d])!==null&&$!==void 0?$:{},...u}}}),[]),F=o.useCallback(d=>{m(u=>({...u,[d]:void 0})),l(u=>({...u,[d]:{}}))},[]),[v,C]=o.useState({}),y=o.useCallback(d=>{var u;return(u=v[d])!==null&&u!==void 0?u:[]},[v]),x=o.useCallback((d,u)=>{C(f=>{var $;return{...f,[d]:[...($=f[d])!==null&&$!==void 0?$:[],u]}})},[]),E=o.useCallback((d,u)=>{C(f=>{var $;return{...f,[d]:(($=f[d])!==null&&$!==void 0?$:[]).filter(q=>q.id!==u)}})},[]),[w,l]=o.useState({}),h=o.useCallback(d=>{var u;return(u=w[d])!==null&&u!==void 0?u:{}},[w]),M=o.useCallback((d,u)=>{l(f=>{var $;return{...f,[d]:{...($=f[d])!==null&&$!==void 0?$:{},...u}}})},[]),[A,I]=o.useState({}),O=o.useCallback((d,u)=>{I(f=>{const $=new Set(f[d]).add(u);return{...f,[d]:$}})},[]),L=o.useCallback((d,u)=>{I(f=>{const $=new Set(f[d]);return $.delete(u),{...f,[d]:$}})},[]),k=o.useCallback(d=>{var u;return Array.from((u=A[d])!==null&&u!==void 0?u:[]).join(" ")||void 0},[A]);return o.createElement(De,{scope:n,getFieldValidity:p,onFieldValidityChange:b,getFieldCustomMatcherEntries:y,onFieldCustomMatcherEntryAdd:x,onFieldCustomMatcherEntryRemove:E,getFieldCustomErrors:h,onFieldCustomErrorsChange:M,onFieldValiditionClear:F},o.createElement(Le,{scope:n,onFieldMessageIdAdd:O,onFieldMessageIdRemove:L,getFieldDescription:k},o.createElement(V.form,_({},a,{ref:i,onInvalid:T(e.onInvalid,d=>{const u=ve(d.currentTarget);u===d.target&&u.focus(),d.preventDefault()}),onSubmit:T(e.onSubmit,r,{checkForDefaultPrevented:!1}),onReset:T(e.onReset,r)}))))}),$e="FormField",[qe,U]=X($e),Be=o.forwardRef((e,t)=>{const{__scopeForm:n,name:r,serverInvalid:a=!1,...s}=e,c=N($e,n).getFieldValidity(r),m=W();return o.createElement(qe,{scope:n,id:m,name:r,serverInvalid:a},o.createElement(V.div,_({"data-valid":te(c,a),"data-invalid":ne(c,a)},s,{ref:t})))}),re="FormLabel",Ue=o.forwardRef((e,t)=>{const{__scopeForm:n,...r}=e,a=N(re,n),s=U(re,n),i=r.htmlFor||s.id,c=a.getFieldValidity(s.name);return o.createElement(Te,_({"data-valid":te(c,s.serverInvalid),"data-invalid":ne(c,s.serverInvalid)},r,{ref:t,htmlFor:i}))}),G="FormControl",je=o.forwardRef((e,t)=>{const{__scopeForm:n,...r}=e,a=N(G,n),s=U(G,n),i=pe(G,n),c=o.useRef(null),m=Q(t,c),p=r.name||s.name,b=r.id||s.id,F=a.getFieldCustomMatcherEntries(p),{onFieldValidityChange:v,onFieldCustomErrorsChange:C,onFieldValiditionClear:y}=a,x=o.useCallback(async l=>{if(he(l.validity)){const f=H(l.validity);v(p,f);return}const h=l.form?new FormData(l.form):new FormData,M=[l.value,h],A=[],I=[];F.forEach(f=>{We(f,M)?I.push(f):Xe(f)&&A.push(f)});const O=A.map(({id:f,match:$})=>[f,$(...M)]),L=Object.fromEntries(O),k=Object.values(L).some(Boolean),d=k;l.setCustomValidity(d?D:"");const u=H(l.validity);if(v(p,u),C(p,L),!k&&I.length>0){const f=I.map(({id:ye,match:Fe})=>Fe(...M).then(be=>[ye,be])),$=await Promise.all(f),q=Object.fromEntries($),_e=Object.values(q).some(Boolean);l.setCustomValidity(_e?D:"");const Ce=H(l.validity);v(p,Ce),C(p,q)}},[F,p,C,v]);o.useEffect(()=>{const l=c.current;if(l){const h=()=>x(l);return l.addEventListener("change",h),()=>l.removeEventListener("change",h)}},[x]);const E=o.useCallback(()=>{const l=c.current;l&&(l.setCustomValidity(""),y(p))},[p,y]);o.useEffect(()=>{var l;const h=(l=c.current)===null||l===void 0?void 0:l.form;if(h)return h.addEventListener("reset",E),()=>h.removeEventListener("reset",E)},[E]),o.useEffect(()=>{const l=c.current,h=l==null?void 0:l.closest("form");if(h&&s.serverInvalid){const M=ve(h);M===l&&M.focus()}},[s.serverInvalid]);const w=a.getFieldValidity(p);return o.createElement(V.input,_({"data-valid":te(w,s.serverInvalid),"data-invalid":ne(w,s.serverInvalid),"aria-invalid":s.serverInvalid?!0:void 0,"aria-describedby":i.getFieldDescription(p),title:""},r,{ref:m,id:b,name:p,onInvalid:T(e.onInvalid,l=>{const h=l.currentTarget;x(h)}),onChange:T(e.onChange,l=>{E()})}))}),D="This value is not valid",Oe={badInput:D,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},j="FormMessage",Ge=o.forwardRef((e,t)=>{const{match:n,name:r,...a}=e,s=U(j,e.__scopeForm),i=r??s.name;return n===void 0?o.createElement(ee,_({},a,{ref:t,name:i}),e.children||D):typeof n=="function"?o.createElement(ze,_({match:n},a,{ref:t,name:i})):o.createElement(He,_({match:n},a,{ref:t,name:i}))}),He=o.forwardRef((e,t)=>{const{match:n,forceMatch:r=!1,name:a,children:s,...i}=e,m=N(j,i.__scopeForm).getFieldValidity(a);return r||(m==null?void 0:m[n])?o.createElement(ee,_({ref:t},i,{name:a}),s??Oe[n]):null}),ze=o.forwardRef((e,t)=>{const{match:n,forceMatch:r=!1,name:a,id:s,children:i,...c}=e,m=N(j,c.__scopeForm),p=o.useRef(null),b=Q(t,p),F=W(),v=s??F,C=o.useMemo(()=>({id:v,match:n}),[v,n]),{onFieldCustomMatcherEntryAdd:y,onFieldCustomMatcherEntryRemove:x}=m;o.useEffect(()=>(y(a,C),()=>x(a,C.id)),[C,a,y,x]);const E=m.getFieldValidity(a),l=m.getFieldCustomErrors(a)[v];return r||E&&!he(E)&&l?o.createElement(ee,_({id:v,ref:b},c,{name:a}),i??D):null}),ee=o.forwardRef((e,t)=>{const{__scopeForm:n,id:r,name:a,...s}=e,i=pe(j,n),c=W(),m=r??c,{onFieldMessageIdAdd:p,onFieldMessageIdRemove:b}=i;return o.useEffect(()=>(p(a,m),()=>b(a,m)),[a,m,p,b]),o.createElement(V.span,_({id:m},s,{ref:t}))}),ae="FormValidityState",Ke=e=>{const{__scopeForm:t,name:n,children:r}=e,a=N(ae,t),s=U(ae,t),i=n??s.name,c=a.getFieldValidity(i);return o.createElement(o.Fragment,null,r(c))},Ye=o.forwardRef((e,t)=>{const{__scopeForm:n,...r}=e;return o.createElement(V.button,_({type:"submit"},r,{ref:t}))});function H(e){const t={};for(const n in e)t[n]=e[n];return t}function Ze(e){return e instanceof HTMLElement}function Je(e){return"validity"in e}function Qe(e){return Je(e)&&(e.validity.valid===!1||e.getAttribute("aria-invalid")==="true")}function ve(e){const t=e.elements,[n]=Array.from(t).filter(Ze).filter(Qe);return n}function We(e,t){return e.match.constructor.name==="AsyncFunction"||et(e.match,t)}function Xe(e){return e.match.constructor.name==="Function"}function et(e,t){return e(...t)instanceof Promise}function he(e){let t=!1;for(const n in e){const r=n;if(r!=="valid"&&r!=="customError"&&e[r]){t=!0;break}}return t}function te(e,t){if((e==null?void 0:e.valid)===!0&&!t)return!0}function ne(e,t){if((e==null?void 0:e.valid)===!1||t)return!0}const tt=ke,nt=Be,ot=Ue,rt=je,at=Ge,st=Ke,it=Ye,ct="_root_1l26a_23",lt="_field_1l26a_32",dt="_label_1l26a_41",ut="_control_1l26a_55",R={root:ct,field:lt,label:dt,control:ut};function B({children:e,...t}){const n=S(R.root,t.className);return g(tt,{...t,className:n,children:e})}try{B.displayName="Root",B.__docgenInfo={description:`Thin wrapper around Radix UI Root component
https://www.radix-ui.com/docs/primitives/components/form#root`,displayName:"Root",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}function K({children:e,...t}){const n=S(R.field,t.className);return g(nt,{...t,className:n,children:e})}try{K.displayName="Field",K.__docgenInfo={description:`Thin wrapper around Radix UI Field component
https://www.radix-ui.com/docs/primitives/components/form#field`,displayName:"Field",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}function Y({children:e,...t}){const n=S(R.label,t.className);return g(ot,{...t,className:n,children:e})}try{Y.displayName="Label",Y.__docgenInfo={description:`Thin wrapper around Radix UI Label component
https://www.radix-ui.com/docs/primitives/components/form#label`,displayName:"Label",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}function Z({children:e,...t}){const n=S(R.control,t.className);return g(rt,{...t,className:n,children:e})}try{Z.displayName="Control",Z.__docgenInfo={description:`Thin wrapper around Radix UI Control component
https://www.radix-ui.com/docs/primitives/components/form#control`,displayName:"Control",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}function se({children:e,...t}){const n=S(R.message,t.className);return g(at,{...t,className:n,children:e})}try{se.displayName="Message",se.__docgenInfo={description:`Thin wrapper around Radix UI Message component
https://www.radix-ui.com/docs/primitives/components/form#message`,displayName:"Message",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}function ie({children:e,...t}){return g(st,{...t,children:e})}try{ie.displayName="ValidityState",ie.__docgenInfo={description:`Thin wrapper around Radix UI ValidityState component
https://www.radix-ui.com/docs/primitives/components/form#validitystate`,displayName:"ValidityState",props:{__scopeForm:{defaultValue:null,description:"",name:"__scopeForm",required:!1,type:{name:"Scope<any>"}}}}}catch{}function J({children:e,size:t,...n}){const r=S(R.submit,n.className);return g(it,{...n,asChild:!0,children:g(ge,{type:"submit",size:t,className:r,children:e})})}try{J.displayName="Submit",J.__docgenInfo={description:`Thin wrapper around Radix UI Submit component
https://www.radix-ui.com/docs/primitives/components/form#submit`,displayName:"Submit",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"lg"'}]}},asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}}}catch{}const bt={title:"Form",component:B},mt=()=>oe(B,{children:[oe(K,{name:"mxid",children:[g(Y,{children:"Username"}),g(Z,{disabled:!0,value:"Hello world!"})]}),g(J,{children:"Submit"})]}),P=mt.bind({});P.args={};var ce,le,de;P.parameters={...P.parameters,docs:{...(ce=P.parameters)==null?void 0:ce.docs,source:{originalSource:`() => <Form.Root>
    <Form.Field name="mxid">
      <Form.Label>Username</Form.Label>
      <Form.Control disabled value="Hello world!" />
    </Form.Field>

    <Form.Submit>Submit</Form.Submit>
  </Form.Root>`,...(de=(le=P.parameters)==null?void 0:le.docs)==null?void 0:de.source}}};const Et=["Root"];export{P as Root,Et as __namedExportsOrder,bt as default};
//# sourceMappingURL=Form.stories-a2593e3a.js.map
