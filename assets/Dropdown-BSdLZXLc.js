import{j as r}from"./jsx-runtime-CexXSJP5.js";import{C as S}from"./chevron-down-Ua1BCmcD.js";import{C as A}from"./check-Bjchr0Ec.js";import{E as P}from"./error-Dmbc84hO.js";import{r as a}from"./index-BP8_t0zE.js";import{c as b}from"./index-CSpfAsmC.js";import{u as v}from"./floating-ui.react-KXiqSXy2.js";const L="_container_1b6mf_17",F="_placeholder_1b6mf_56",H="_border_1b6mf_60",U="_content_1b6mf_69",B="_open_1b6mf_117",z="_help_1b6mf_121",G="_error_1b6mf_126",u={container:L,placeholder:F,border:H,content:U,open:B,help:z,error:G},k=a.forwardRef(function({className:n,label:t,placeholder:e,helpLabel:s,onValueChange:d,error:c,defaultValue:h,values:p,...w},f){const[o,y]=Q(p,e,h),[m,_,D]=M(),{listRef:j,onComboboxKeyDown:I,onOptionKeyDown:N}=W(m,_,y),E=a.useRef(null);a.useEffect(()=>{o.value!==void 0&&E.current?.focus()},[o]);const T=o.text===e,R=b({[u.placeholder]:T}),V=b(u.border,{[u.open]:m}),q=b(u.content,{[u.open]:m}),g=v(),C=v();return r.jsxs("div",{ref:D,className:b(n,u.container),"aria-invalid":!!c,children:[r.jsx("label",{id:g,children:t}),r.jsxs("button",{className:R,role:"combobox","aria-haspopup":"listbox","aria-labelledby":g,"aria-controls":C,"aria-expanded":m,ref:l=>{E.current=l,typeof f=="function"?f(l):f&&(f.current=l)},onClick:()=>_(l=>!l),onKeyDown:I,...w,children:[o.text,r.jsx(S,{width:"24",height:"24"})]}),r.jsx("div",{className:V}),r.jsx("div",{className:q,children:r.jsx("ul",{ref:j,id:C,role:"listbox",className:u.content,children:p.map(([l,x])=>r.jsx(J,{isDisplayed:m,isSelected:o.value===l,onClick:()=>{_(!1),y({value:l,text:x}),d?.(l)},onKeyDown:K=>N(K,l,x),children:x},l))})}),!c&&s&&r.jsx("span",{className:u.help,children:s}),c&&r.jsxs("span",{className:u.error,children:[r.jsx(P,{width:"20",height:"20"}),c]})]})}),J=a.memo(function({children:n,isSelected:t,isDisplayed:e,...s}){const d=a.useRef(null);return a.useEffect(()=>{t&&e&&d.current?.focus()},[t,e]),r.jsxs("li",{tabIndex:0,role:"option",ref:d,"aria-selected":t,...s,children:[n," ",t&&r.jsx(A,{width:"20",height:"20"})]})});function M(){const[i,n]=a.useState(!1),t=a.useRef(null);return a.useEffect(()=>{const e=s=>{t.current&&!t.current.contains(s.target)&&n(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[n]),[i,n,t]}function Q(i,n,t){return a.useState(()=>{const e={value:void 0,text:n};if(!t)return e;const s=i.find(([d])=>d===t);return s?{value:s[0],text:s[1]}:e})}function W(i,n,t){const e=a.useRef(null),s=a.useCallback(({key:c})=>{switch(c){case"Escape":n(!1);break;case"ArrowDown":n(!0),i&&e.current?.firstElementChild?.focus();break;case"ArrowUp":n(!0);break;case"Home":{n(!0),Promise.resolve().then(()=>{e.current?.firstElementChild?.focus()});break}case"End":{n(!0),Promise.resolve().then(()=>{e.current?.lastElementChild?.focus()});break}}},[e,i,n]),d=a.useCallback((c,h,p)=>{const{key:w,altKey:f}=c;switch(c.stopPropagation(),c.preventDefault(),w){case"Enter":case" ":{t({text:p,value:h}),n(!1);break}case"Tab":case"Escape":n(!1);break;case"ArrowDown":{const o=document.activeElement;e.current?.contains(o)&&o&&o.nextElementSibling?.focus();break}case"ArrowUp":{if(f)t({text:p,value:h}),n(!1);else{const o=document.activeElement;e.current?.contains(o)&&o&&o.previousElementSibling?.focus()}break}case"Home":{e.current?.firstElementChild?.focus();break}case"End":{e.current?.lastElementChild?.focus();break}}},[e,t,n]);return{listRef:e,onComboboxKeyDown:s,onOptionKeyDown:d}}try{k.displayName="Dropdown",k.__docgenInfo={description:"The dropdown content.",displayName:"Dropdown",props:{className:{defaultValue:null,description:"The CSS class name.",name:"className",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"The default value of the dropdown.",name:"defaultValue",required:!1,type:{name:"string"}},values:{defaultValue:null,description:`The values of the dropdown.
[value, text]`,name:"values",required:!0,type:{name:"[string, string][]"}},placeholder:{defaultValue:null,description:"The placeholder text.",name:"placeholder",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"The label to display at the top of the dropdown",name:"label",required:!0,type:{name:"string"}},helpLabel:{defaultValue:null,description:"The help label to display at the bottom of the dropdown",name:"helpLabel",required:!1,type:{name:"string"}},onValueChange:{defaultValue:null,description:`Callback for when the value changes.
@param value`,name:"onValueChange",required:!1,type:{name:"((value: string) => void)"}},error:{defaultValue:null,description:"The error message to display.",name:"error",required:!1,type:{name:"string"}}}}}catch{}export{k as D};
