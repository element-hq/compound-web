import{j as g}from"./jsx-runtime-f6d73c06.js";import{$ as j,_ as y,a as S,b as K}from"./index-74e4bf0b.js";import{r as n}from"./index-8ee6c85d.js";import{$ as B,b as Y,a as T}from"./index-79556c5a.js";import{$ as V,a as z,b as U,c as W,d as q,e as X,f as J,g as Q,h as Z}from"./index-0952a72e.js";import{c as ee}from"./index-e131923d.js";const te=n.forwardRef((e,o)=>n.createElement(j.span,y({},e,{ref:o,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),oe=te,[D,Ve]=B("Tooltip",[V]),O=V(),ne="TooltipProvider",re=700,k="tooltip.open",[ae,L]=D(ne),ce=e=>{const{__scopeTooltip:o,delayDuration:t=re,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:s}=e,[l,u]=n.useState(!0),c=n.useRef(!1),d=n.useRef(0);return n.useEffect(()=>{const i=d.current;return()=>window.clearTimeout(i)},[]),n.createElement(ae,{scope:o,isOpenDelayed:l,delayDuration:t,onOpen:n.useCallback(()=>{window.clearTimeout(d.current),u(!1)},[]),onClose:n.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:n.useCallback(i=>{c.current=i},[]),disableHoverableContent:a},s)},A="Tooltip",[se,P]=D(A),le=e=>{const{__scopeTooltip:o,children:t,open:r,defaultOpen:a=!1,onOpenChange:s,disableHoverableContent:l,delayDuration:u}=e,c=L(A,e.__scopeTooltip),d=O(o),[i,p]=n.useState(null),v=Y(),f=n.useRef(0),$=l??c.disableHoverableContent,b=u??c.delayDuration,h=n.useRef(!1),[x=!1,m]=z({prop:r,defaultProp:a,onChange:I=>{I?(c.onOpen(),document.dispatchEvent(new CustomEvent(k))):c.onClose(),s==null||s(I)}}),w=n.useMemo(()=>x?h.current?"delayed-open":"instant-open":"closed",[x]),E=n.useCallback(()=>{window.clearTimeout(f.current),h.current=!1,m(!0)},[m]),C=n.useCallback(()=>{window.clearTimeout(f.current),m(!1)},[m]),M=n.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{h.current=!0,m(!0)},b)},[b,m]);return n.useEffect(()=>()=>window.clearTimeout(f.current),[]),n.createElement(U,d,n.createElement(se,{scope:o,contentId:v,open:x,stateAttribute:w,trigger:i,onTriggerChange:p,onTriggerEnter:n.useCallback(()=>{c.isOpenDelayed?M():E()},[c.isOpenDelayed,M,E]),onTriggerLeave:n.useCallback(()=>{$?C():window.clearTimeout(f.current)},[C,$]),onOpen:E,onClose:C,disableHoverableContent:$},t))},H="TooltipTrigger",ie=n.forwardRef((e,o)=>{const{__scopeTooltip:t,...r}=e,a=P(H,t),s=L(H,t),l=O(t),u=n.useRef(null),c=S(o,u,a.onTriggerChange),d=n.useRef(!1),i=n.useRef(!1),p=n.useCallback(()=>d.current=!1,[]);return n.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),n.createElement(W,y({asChild:!0},l),n.createElement(j.button,y({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:c,onPointerMove:T(e.onPointerMove,v=>{v.pointerType!=="touch"&&!i.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),i.current=!0)}),onPointerLeave:T(e.onPointerLeave,()=>{a.onTriggerLeave(),i.current=!1}),onPointerDown:T(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:T(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:T(e.onBlur,a.onClose),onClick:T(e.onClick,a.onClose)})))}),G="TooltipPortal",[ue,de]=D(G,{forceMount:void 0}),pe=e=>{const{__scopeTooltip:o,forceMount:t,children:r,container:a}=e,s=P(G,o);return n.createElement(ue,{scope:o,forceMount:t},n.createElement(q,{present:t||s.open},n.createElement(X,{asChild:!0,container:a},r)))},_="TooltipContent",fe=n.forwardRef((e,o)=>{const t=de(_,e.__scopeTooltip),{forceMount:r=t.forceMount,side:a="top",...s}=e,l=P(_,e.__scopeTooltip);return n.createElement(q,{present:r||l.open},l.disableHoverableContent?n.createElement(F,y({side:a},s,{ref:o})):n.createElement($e,y({side:a},s,{ref:o})))}),$e=n.forwardRef((e,o)=>{const t=P(_,e.__scopeTooltip),r=L(_,e.__scopeTooltip),a=n.useRef(null),s=S(o,a),[l,u]=n.useState(null),{trigger:c,onClose:d}=t,i=a.current,{onPointerInTransitChange:p}=r,v=n.useCallback(()=>{u(null),p(!1)},[p]),f=n.useCallback(($,b)=>{const h=$.currentTarget,x={x:$.clientX,y:$.clientY},m=xe(x,h.getBoundingClientRect()),w=ye(x,m),E=ge(b.getBoundingClientRect()),C=we([...w,...E]);u(C),p(!0)},[p]);return n.useEffect(()=>()=>v(),[v]),n.useEffect(()=>{if(c&&i){const $=h=>f(h,i),b=h=>f(h,c);return c.addEventListener("pointerleave",$),i.addEventListener("pointerleave",b),()=>{c.removeEventListener("pointerleave",$),i.removeEventListener("pointerleave",b)}}},[c,i,f,v]),n.useEffect(()=>{if(l){const $=b=>{const h=b.target,x={x:b.clientX,y:b.clientY},m=(c==null?void 0:c.contains(h))||(i==null?void 0:i.contains(h)),w=!Te(x,l);m?v():w&&(v(),d())};return document.addEventListener("pointermove",$),()=>document.removeEventListener("pointermove",$)}},[c,i,l,d,v]),n.createElement(F,y({},e,{ref:s}))}),[ve,he]=D(A,{isInside:!1}),F=n.forwardRef((e,o)=>{const{__scopeTooltip:t,children:r,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:l,...u}=e,c=P(_,t),d=O(t),{onClose:i}=c;return n.useEffect(()=>(document.addEventListener(k,i),()=>document.removeEventListener(k,i)),[i]),n.useEffect(()=>{if(c.trigger){const p=v=>{const f=v.target;f!=null&&f.contains(c.trigger)&&i()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,i]),n.createElement(J,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:i},n.createElement(Q,y({"data-state":c.stateAttribute},d,u,{ref:o,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),n.createElement(K,null,r),n.createElement(ve,{scope:t,isInside:!0},n.createElement(oe,{id:c.contentId,role:"tooltip"},a||r))))}),be="TooltipArrow",me=n.forwardRef((e,o)=>{const{__scopeTooltip:t,...r}=e,a=O(t);return he(be,t).isInside?null:n.createElement(Z,y({},a,r,{ref:o}))});function xe(e,o){const t=Math.abs(o.top-e.y),r=Math.abs(o.bottom-e.y),a=Math.abs(o.right-e.x),s=Math.abs(o.left-e.x);switch(Math.min(t,r,a,s)){case s:return"left";case a:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ye(e,o,t=5){const r=[];switch(o){case"top":r.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":r.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":r.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":r.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return r}function ge(e){const{top:o,right:t,bottom:r,left:a}=e;return[{x:a,y:o},{x:t,y:o},{x:t,y:r},{x:a,y:r}]}function Te(e,o){const{x:t,y:r}=e;let a=!1;for(let s=0,l=o.length-1;s<o.length;l=s++){const u=o[s].x,c=o[s].y,d=o[l].x,i=o[l].y;c>r!=i>r&&t<(d-u)*(r-c)/(i-c)+u&&(a=!a)}return a}function we(e){const o=e.slice();return o.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Ee(o)}function Ee(e){if(e.length<=1)return e.slice();const o=[];for(let r=0;r<e.length;r++){const a=e[r];for(;o.length>=2;){const s=o[o.length-1],l=o[o.length-2];if((s.x-l.x)*(a.y-l.y)>=(s.y-l.y)*(a.x-l.x))o.pop();else break}o.push(a)}o.pop();const t=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;t.length>=2;){const s=t[t.length-1],l=t[t.length-2];if((s.x-l.x)*(a.y-l.y)>=(s.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}return t.pop(),o.length===1&&t.length===1&&o[0].x===t[0].x&&o[0].y===t[0].y?o:o.concat(t)}const Ce=ce,_e=le,Pe=ie,De=pe,Oe=fe,Re=me,ke="_tooltip_svz44_17",Le="_caption_svz44_29",Ae="_arrow_svz44_34",R={tooltip:ke,caption:Le,arrow:Ae},N=({children:e,label:o,caption:t,shortcut:r,side:a="bottom",align:s="center",onEscapeKeyDown:l,onPointerDownOutside:u,open:c})=>g.jsx(Ce,{children:g.jsxs(_e,{open:c,delayDuration:300,children:[g.jsx(Pe,{asChild:!0,children:e}),g.jsx(De,{children:g.jsxs(Oe,{side:a,align:s,onEscapeKeyDown:l,onPointerDownOutside:u,className:R.tooltip,children:[o,(t||r)&&g.jsx("span",{className:ee(R.caption,"cpd-theme-dark"),children:t??r}),g.jsx(Re,{width:10,height:6,className:R.arrow})]})})]})});try{N.displayName="Tooltip",N.__docgenInfo={description:"A tooltip component",displayName:"Tooltip",props:{label:{defaultValue:null,description:"The tooltip label",name:"label",required:!0,type:{name:"string"}},caption:{defaultValue:null,description:"The tooltip caption",name:"caption",required:!1,type:{name:"string"}},shortcut:{defaultValue:null,description:"@deprecated replaced by `caption`",name:"shortcut",required:!1,type:{name:"string"}},side:{defaultValue:{value:"bottom"},description:"The side where the tooltip is rendered",name:"side",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},align:{defaultValue:{value:"center"},description:`The preferred alignment against the trigger.
May change when collisions occur.`,name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"start"'},{value:'"end"'}]}},onEscapeKeyDown:{defaultValue:null,description:"Event handler called when the escape key is down.",name:"onEscapeKeyDown",required:!1,type:{name:"((event: KeyboardEvent) => void)"}},onPointerDownOutside:{defaultValue:null,description:`Event handler called when a pointer event occurs outside
the bounds of the component.`,name:"onPointerDownOutside",required:!1,type:{name:"((event: PointerDownOutsideEvent) => void)"}},open:{defaultValue:{value:"undefined"},description:`The controlled open state of the tooltip.
You will mostly want to omit this property. Will be used the vast majority
of the time during development.`,name:"open",required:!1,type:{name:"boolean"}}}}}catch{}export{N as T};
//# sourceMappingURL=Tooltip-dc6d0d12.js.map
