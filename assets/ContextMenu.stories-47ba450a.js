import{j as n}from"./jsx-runtime-f6d73c06.js";import{U as E}from"./user-profile-9aa97790.js";import{S as O,a as k,b as T}from"./leave-e92ccc05.js";import{r as t}from"./index-8ee6c85d.js";import{_ as b}from"./index-fc9b93e8.js";import{$ as A,a as x}from"./index-79556c5a.js";import{$ as N}from"./index-6e117a6c.js";import{$ as j,a as F,c as D,d as U,e as z,b as q,J as $}from"./index-8c13e49b.js";import{a as V}from"./index-67f1f257.js";import{F as W}from"./FloatingMenu-70dfe389.js";import{c as L}from"./index-e131923d.js";import{d as G,D as J,g as X}from"./DrawerMenu-da2be9d5.js";import{a as B,M as C}from"./MenuItem-d5d526f6.js";import{S as Y}from"./Separator-f8ae34aa.js";import"./_commonjsHelpers-de833af9.js";import"./index-8bf7f4ad.js";import"./useId-a94b91a4.js";import"./Text-270962e1.js";import"./Typography-1dd46c86.js";const R="ContextMenu",[H,Re]=A(R,[j]),h=j(),[K,w]=H(R),Q=e=>{const{__scopeContextMenu:o,children:i,onOpenChange:r,dir:u,modal:p=!0}=e,[l,a]=t.useState(!1),c=h(o),m=V(r),s=t.useCallback(f=>{a(f),m(f)},[m]);return t.createElement(K,{scope:o,open:l,onOpenChange:s,modal:p},t.createElement(F,b({},c,{dir:u,open:l,onOpenChange:s,modal:p}),i))},Z="ContextMenuTrigger",ee=t.forwardRef((e,o)=>{const{__scopeContextMenu:i,disabled:r=!1,...u}=e,p=w(Z,i),l=h(i),a=t.useRef({x:0,y:0}),c=t.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),m=t.useRef(0),s=t.useCallback(()=>window.clearTimeout(m.current),[]),f=d=>{a.current={x:d.clientX,y:d.clientY},p.onOpenChange(!0)};return t.useEffect(()=>s,[s]),t.useEffect(()=>void(r&&s()),[r,s]),t.createElement(t.Fragment,null,t.createElement(q,b({},l,{virtualRef:c})),t.createElement(N.span,b({"data-state":p.open?"open":"closed","data-disabled":r?"":void 0},u,{ref:o,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:x(e.onContextMenu,d=>{s(),f(d),d.preventDefault()}),onPointerDown:r?e.onPointerDown:x(e.onPointerDown,v(d=>{s(),m.current=window.setTimeout(()=>f(d),700)})),onPointerMove:r?e.onPointerMove:x(e.onPointerMove,v(s)),onPointerCancel:r?e.onPointerCancel:x(e.onPointerCancel,v(s)),onPointerUp:r?e.onPointerUp:x(e.onPointerUp,v(s))})))}),te=e=>{const{__scopeContextMenu:o,...i}=e,r=h(o);return t.createElement(D,b({},r,i))},ne="ContextMenuContent",oe=t.forwardRef((e,o)=>{const{__scopeContextMenu:i,...r}=e,u=w(ne,i),p=h(i),l=t.useRef(!1);return t.createElement(U,b({},p,r,{ref:o,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var c;(c=e.onCloseAutoFocus)===null||c===void 0||c.call(e,a),!a.defaultPrevented&&l.current&&a.preventDefault(),l.current=!1},onInteractOutside:a=>{var c;(c=e.onInteractOutside)===null||c===void 0||c.call(e,a),!a.defaultPrevented&&!u.modal&&(l.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),re=t.forwardRef((e,o)=>{const{__scopeContextMenu:i,...r}=e,u=h(i);return t.createElement(z,b({},u,r,{ref:o}))});function v(e){return o=>o.pointerType!=="mouse"?e(o):void 0}const S=Q,ae=ee,ce=te,se=oe,ie=({onSelect:e,children:o})=>n.jsx(re,{onSelect:e??void 0,asChild:!0,children:o}),M=({title:e,onOpenChange:o,trigger:i,hasAccessibleAlternative:r,children:u})=>{const[p,l]=t.useState(!1),a=t.useCallback(_=>{l(_),o==null||o(_)},[l,o]),c=X(),m=c==="android"||c==="ios",s=t.useMemo(()=>({MenuItemWrapper:m?null:ie,onOpenChange:a}),[a]),f=n.jsx(B.Provider,{value:s,children:u}),d=n.jsx(ae,{"aria-haspopup":"menu",tabIndex:r?void 0:0,asChild:!0,children:i});return m?n.jsxs(n.Fragment,{children:[n.jsx(S,{onOpenChange:a,children:d}),n.jsx($.Root,{open:p,onOpenChange:a,children:n.jsxs($.Portal,{children:[n.jsx($.Overlay,{className:L(G.bg)}),n.jsx($.Content,{asChild:!0,children:n.jsx(J,{title:e,children:f})})]})})]}):n.jsxs(S,{onOpenChange:a,children:[d,n.jsx(ce,{children:n.jsx(se,{asChild:!0,children:n.jsx(W,{title:e,children:f})})})]})};try{M.displayName="ContextMenu",M.__docgenInfo={description:"A menu opened by right-clicking or long-pressing another UI element.",displayName:"ContextMenu",props:{title:{defaultValue:null,description:"The menu title.",name:"title",required:!0,type:{name:"string"}},onOpenChange:{defaultValue:null,description:"Event handler called when the open state of the menu changes.",name:"onOpenChange",required:!1,type:{name:"((open: boolean) => void)"}},trigger:{defaultValue:null,description:`The trigger that can be right-clicked or long-pressed to open the menu.
This must be a component that accepts a ref and spreads props.
https://www.radix-ui.com/primitives/docs/guides/composition`,name:"trigger",required:!0,type:{name:"ReactNode"}},hasAccessibleAlternative:{defaultValue:null,description:`Whether the functionality of this menu is available through some other
keyboard-accessible means. Preferably this should be true, because context
menus are potentially difficult to discover, but if false the trigger will
become focusable so that it can be opened via keyboard navigation.`,name:"hasAccessibleAlternative",required:!0,type:{name:"boolean"}},children:{defaultValue:null,description:"The menu contents.",name:"children",required:!0,type:{name:"ReactNode"}}}}}catch{}const we={title:"Menu/ContextMenu",component:M,tags:["autodocs"],argTypes:{},args:{}},le=e=>n.jsxs(M,{...e,title:"Settings",trigger:n.jsx("div",{style:{borderRadius:24,background:"var(--cpd-color-bg-subtle-secondary)",inlineSize:300,blockSize:200,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",padding:32,boxSizing:"border-box"},children:"Right click or long press to open menu"}),hasAccessibleAlternative:!1,children:[n.jsx(C,{Icon:E,label:"Profile",onSelect:()=>{}}),n.jsx(C,{Icon:O,label:"Notifications",onSelect:()=>{}}),n.jsx(C,{Icon:k,label:"Feedback",onSelect:()=>{}}),n.jsx(Y,{}),n.jsx(C,{kind:"critical",Icon:T,label:"Sign out",onSelect:()=>{}})]}),g=le.bind({});g.args={};var y,I,P;g.parameters={...g.parameters,docs:{...(y=g.parameters)==null?void 0:y.docs,source:{originalSource:`args => {
  return <ContextMenuComponent {...args} title="Settings" trigger={<div style={{
    borderRadius: 24,
    background: "var(--cpd-color-bg-subtle-secondary)",
    inlineSize: 300,
    blockSize: 200,
    textAlign: "center",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    padding: 32,
    boxSizing: "border-box"
  }}>
          Right click or long press to open menu
        </div>} hasAccessibleAlternative={false}>
      <MenuItem Icon={UserProfileIcon} label="Profile" onSelect={() => {}} />
      <MenuItem Icon={NotificationsIcon} label="Notifications" onSelect={() => {}} />
      <MenuItem Icon={ChatProblemIcon} label="Feedback" onSelect={() => {}} />
      <Separator />
      <MenuItem kind="critical" Icon={LeaveIcon} label="Sign out" onSelect={() => {}} />
    </ContextMenuComponent>;
}`,...(P=(I=g.parameters)==null?void 0:I.docs)==null?void 0:P.source}}};const Ee=["ContextMenu"];export{g as ContextMenu,Ee as __namedExportsOrder,we as default};
//# sourceMappingURL=ContextMenu.stories-47ba450a.js.map
