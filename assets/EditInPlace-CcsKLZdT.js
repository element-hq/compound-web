import{j as t}from"./jsx-runtime-DoxjgJx5.js";import{c as n}from"./index-C2KoGaFq.js";import{r as s,a as x}from"./index-Cu9bd8lq.js";import{T as P}from"./Text-BTQEANK3.js";import{u as v}from"./useId-D5m2XpUu.js";import{S as z}from"./check-CXsFGzWm.js";import{S as F}from"./close-D55JIkKE.js";import{S as D}from"./error-YokBWoNX.js";import{I as A}from"./InlineSpinner-BZBYCXgP.js";const W="_container_zfn7i_17",G="_label_zfn7i_21",H="_controls_zfn7i_27",J="_button_zfn7i_32",K="_control_zfn7i_27",e={container:W,label:G,controls:H,"button-group":"_button-group_zfn7i_32",button:J,"primary-button":"_primary-button_zfn7i_51","primary-button-disabled":"_primary-button-disabled_zfn7i_60",control:K,"container-show-buttons":"_container-show-buttons_zfn7i_79","container-error":"_container-error_zfn7i_84","caption-line":"_caption-line_zfn7i_92","caption-icon":"_caption-icon_zfn7i_99","caption-icon-error":"_caption-icon-error_zfn7i_105","caption-icon-saved":"_caption-icon-saved_zfn7i_109","caption-text":"_caption-text_zfn7i_130","caption-text-error":"_caption-text-error_zfn7i_135","caption-text-saved":"_caption-text-saved_zfn7i_139","caption-text-saving":"_caption-text-saving_zfn7i_143","caption-text-help":"_caption-text-help_zfn7i_147"},N=s.forwardRef(function({className:p,label:f,onSave:r,onCancel:i,saveButtonLabel:m,cancelButtonLabel:c,disableSaveButton:a,error:u,savedLabel:w,savingLabel:q,helpLabel:V,disabled:I,...L},T){const b=v(),g=v(),y=v(),[C,h]=x.useState(!1),[o,j]=x.useState(!1),E=n(e.container,p,{[e["container-error"]]:!!u,[e["container-show-buttons"]]:o}),d=s.useRef(null),S=s.useRef(null),_=s.useRef(null);x.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const B=s.useCallback(async R=>{R.preventDefault();try{j(!0),await r(),S.current?.blur(),h(!0),d.current=setTimeout(()=>{h(!1)},2e3)}catch{}finally{j(!1)}},[h,r,d]),k=s.useCallback(()=>{_.current?.blur(),i()},[_,i]);return t.jsxs("form",{className:E,id:b,onSubmit:B,children:[t.jsx("div",{className:e.label,id:g,children:f}),t.jsxs("div",{className:e.controls,children:[t.jsx(P,{ref:T,...L,className:e.control,"aria-labelledby":g,"aria-invalid":!!u,"aria-errormessage":u?y:void 0,disabled:I||o}),t.jsxs("div",{className:e["button-group"],children:[t.jsx("button",{type:"submit",className:n(e.button,e["primary-button"],{[e["primary-button-disabled"]]:a}),ref:S,"aria-controls":b,"aria-label":m,disabled:a||o,children:t.jsx(z,{})}),t.jsx("button",{type:"button",role:"button",ref:_,className:e.button,onClick:k,"aria-controls":b,"aria-label":c,disabled:o,children:t.jsx(F,{})})]})]}),t.jsx(M,{error:u,errorTextId:y,saving:o,savingLabel:q,showSaved:C,savedLabel:w,helpLabel:V})]})});function M({error:l,errorTextId:p,saving:f,savingLabel:r,savedLabel:i,showSaved:m,helpLabel:c}){const a=[];return l&&a.push(t.jsxs("div",{className:e["caption-line"],children:[t.jsx(D,{className:n(e["caption-icon"],e["caption-icon-error"])}),t.jsx("span",{id:p,className:n(e["caption-text"],e["caption-text-error"]),children:l})]},"error")),f&&a.push(t.jsxs("div",{className:e["caption-line"],children:[t.jsx(A,{}),t.jsx("span",{className:n(e["caption-text"],e["caption-text-saving"]),children:r})]},"saving")),i&&m&&a.push(t.jsxs("div",{className:e["caption-line"],children:[t.jsx("div",{className:n(e["caption-icon"],e["caption-icon-saved"]),children:t.jsx(z,{})}),t.jsx("span",{className:n(e["caption-text"],e["caption-text-saved"]),children:i})]},"saved")),a.length===0&&c&&a.push(t.jsx("span",{className:n(e["caption-line"],e["caption-text"],e["caption-text-help"]),children:c},"help")),t.jsx(t.Fragment,{children:a})}try{N.displayName="EditInPlace",N.__docgenInfo={description:`A text box with save/cancel buttons that appear when the field is active.
Since thios control has its own 'save' button, it should *not* appear as part
of a larger form: it exists as its own form that submits separately.`,displayName:"EditInPlace",props:{className:{defaultValue:null,description:"The CSS class name.",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"If true, disabled the entire component to disallow editing.",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"The content of the text box",name:"value",required:!1,type:{name:"string | (string & readonly string[])"}},label:{defaultValue:null,description:"The label for the control",name:"label",required:!0,type:{name:"string"}},enableLigatures:{defaultValue:null,description:`Enable contextual alternate ligatures on input text
For example on an in-place editing field
https://github.com/rsms/inter/issues/222
https://github.com/rsms/inter/blob/master/src/features/calt.fea`,name:"enableLigatures",required:!1,type:{name:"boolean"}},onSave:{defaultValue:null,description:"Callback for when the user confirms the change",name:"onSave",required:!0,type:{name:"() => Promise<void>"}},onCancel:{defaultValue:null,description:"Calback for when the user wishes to cancel the change",name:"onCancel",required:!0,type:{name:"() => void"}},saveButtonLabel:{defaultValue:null,description:"The label for the save button",name:"saveButtonLabel",required:!0,type:{name:"string"}},cancelButtonLabel:{defaultValue:null,description:"The label for the cancel button",name:"cancelButtonLabel",required:!1,type:{name:"string"}},disableSaveButton:{defaultValue:null,description:`True to disable the save button, false to enable.
Default: false (enabled)`,name:"disableSaveButton",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:`Error message to be displayed below the box. If supplied, will disable the
save button.`,name:"error",required:!1,type:{name:"string"}},savedLabel:{defaultValue:null,description:`Label to be displayed by the green check at the bottom. Will only be displayed
for 2 seconds after the onSave callback promise resolves successfully.`,name:"savedLabel",required:!1,type:{name:"string"}},savingLabel:{defaultValue:null,description:"The label for the 'in progress' saving caption",name:"savingLabel",required:!0,type:{name:"string"}},helpLabel:{defaultValue:null,description:"Label to be displayed under the input as a help text",name:"helpLabel",required:!1,type:{name:"string"}}}}}catch{}export{N as E};
