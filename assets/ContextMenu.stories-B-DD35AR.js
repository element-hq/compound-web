import{j as o}from"./jsx-runtime-DR9Q75dM.js";import{U as D}from"./user-profile-cqTW1cHH.js";import{N as U,C as L,L as $}from"./notifications-BEKrtwGv.js";import{r as s}from"./index-DRjF_FHU.js";import{c as g}from"./index-CGa_gRws.js";import{P as F}from"./index-Ksfxd92j.js";import{c as R,A as z,C as B,G as q,L as V,I as W,a as H,R as X,b as K,d as Y,S as J,e as Q,f as Z,g as ee,u as te,h as ne,P as oe,D as v}from"./index-Dbt-v4y0.js";import{F as re}from"./FloatingMenu-Dc89G4Nf.js";import{c as ae}from"./index-lhGYx47h.js";import{d as se,D as ie,g as ce}from"./DrawerMenu-BNILBemh.js";import{a as ue,M as b}from"./MenuItem-BFo5ba9w.js";import{S as le}from"./Separator-Dj8B2jLY.js";import"./index-BvEl7W6R.js";import"./index-C8xBnYIG.js";import"./index-BXwbELbV.js";import"./floating-ui.react-CSvGZjCC.js";import"./Text-BvzksikX.js";import"./Typography-DzhKoIWt.js";import"./chevron-right-DND12YKW.js";function de(e,t=[]){let r=[];function n(l,c){const i=s.createContext(c),p=r.length;r=[...r,c];const f=x=>{const{scope:m,children:C,...h}=x,k=m?.[e]?.[p]||i,G=s.useMemo(()=>h,Object.values(h));return o.jsx(k.Provider,{value:G,children:C})};f.displayName=l+"Provider";function u(x,m){const C=m?.[e]?.[p]||i,h=s.useContext(C);if(h)return h;if(c!==void 0)return c;throw new Error(`\`${x}\` must be used within \`${l}\``)}return[f,u]}const a=()=>{const l=r.map(c=>s.createContext(c));return function(i){const p=i?.[e]||l;return s.useMemo(()=>({[`__scope${e}`]:{...i,[e]:p}}),[i,p])}};return a.scopeName=e,[n,pe(a,...t)]}function pe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const c=n.reduce((i,{useScope:p,scopeName:f})=>{const x=p(l)[`__scope${f}`];return{...i,...x}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}var I="ContextMenu",[xe,it]=de(I,[R]),d=R(),[me,y]=xe(I),N=e=>{const{__scopeContextMenu:t,children:r,onOpenChange:n,dir:a,modal:l=!0}=e,[c,i]=s.useState(!1),p=d(t),f=te(n),u=s.useCallback(x=>{i(x),f(x)},[f]);return o.jsx(me,{scope:t,open:c,onOpenChange:u,modal:l,children:o.jsx(ne,{...p,dir:a,open:c,onOpenChange:u,modal:l,children:r})})};N.displayName=I;var w="ContextMenuTrigger",j=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,disabled:n=!1,...a}=e,l=y(w,r),c=d(r),i=s.useRef({x:0,y:0}),p=s.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...i.current})}),f=s.useRef(0),u=s.useCallback(()=>window.clearTimeout(f.current),[]),x=m=>{i.current={x:m.clientX,y:m.clientY},l.onOpenChange(!0)};return s.useEffect(()=>u,[u]),s.useEffect(()=>void(n&&u()),[n,u]),o.jsxs(o.Fragment,{children:[o.jsx(z,{...c,virtualRef:p}),o.jsx(F.span,{"data-state":l.open?"open":"closed","data-disabled":n?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:n?e.onContextMenu:g(e.onContextMenu,m=>{u(),x(m),m.preventDefault()}),onPointerDown:n?e.onPointerDown:g(e.onPointerDown,_(m=>{u(),f.current=window.setTimeout(()=>x(m),700)})),onPointerMove:n?e.onPointerMove:g(e.onPointerMove,_(u)),onPointerCancel:n?e.onPointerCancel:g(e.onPointerCancel,_(u)),onPointerUp:n?e.onPointerUp:g(e.onPointerUp,_(u))})]})});j.displayName=w;var fe="ContextMenuPortal",A=e=>{const{__scopeContextMenu:t,...r}=e,n=d(t);return o.jsx(oe,{...n,...r})};A.displayName=fe;var E="ContextMenuContent",O=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=y(E,r),l=d(r),c=s.useRef(!1);return o.jsx(B,{...l,...n,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),!i.defaultPrevented&&c.current&&i.preventDefault(),c.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),!i.defaultPrevented&&!a.modal&&(c.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});O.displayName=E;var Ce="ContextMenuGroup",he=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(q,{...a,...n,ref:t})});he.displayName=Ce;var ge="ContextMenuLabel",Me=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(V,{...a,...n,ref:t})});Me.displayName=ge;var ve="ContextMenuItem",T=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(W,{...a,...n,ref:t})});T.displayName=ve;var be="ContextMenuCheckboxItem",_e=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(H,{...a,...n,ref:t})});_e.displayName=be;var Se="ContextMenuRadioGroup",Ie=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(X,{...a,...n,ref:t})});Ie.displayName=Se;var Pe="ContextMenuRadioItem",Re=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(K,{...a,...n,ref:t})});Re.displayName=Pe;var ye="ContextMenuItemIndicator",Ne=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(Y,{...a,...n,ref:t})});Ne.displayName=ye;var we="ContextMenuSeparator",je=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(J,{...a,...n,ref:t})});je.displayName=we;var Ae="ContextMenuArrow",Ee=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(Q,{...a,...n,ref:t})});Ee.displayName=Ae;var Oe="ContextMenuSubTrigger",Te=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(Z,{...a,...n,ref:t})});Te.displayName=Oe;var ke="ContextMenuSubContent",Ge=s.forwardRef((e,t)=>{const{__scopeContextMenu:r,...n}=e,a=d(r);return o.jsx(ee,{...a,...n,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ge.displayName=ke;function _(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var P=N,De=j,Ue=A,Le=O;const $e=({onSelect:e,children:t})=>o.jsx(T,{onSelect:e??void 0,asChild:!0,children:t}),S=({title:e,onOpenChange:t,trigger:r,hasAccessibleAlternative:n,children:a})=>{const[l,c]=s.useState(!1),i=s.useCallback(C=>{c(C),t?.(C)},[c,t]),p=ce(),f=p==="android"||p==="ios",u=s.useMemo(()=>({MenuItemWrapper:f?null:$e,onOpenChange:i}),[i]),x=o.jsx(ue.Provider,{value:u,children:a}),m=o.jsx(De,{"aria-haspopup":"menu",tabIndex:n?void 0:0,asChild:!0,children:r});return f?o.jsxs(o.Fragment,{children:[o.jsx(P,{onOpenChange:i,children:m}),o.jsx(v.Root,{open:l,onOpenChange:i,children:o.jsxs(v.Portal,{children:[o.jsx(v.Overlay,{className:ae(se.bg)}),o.jsx(v.Content,{asChild:!0,children:o.jsx(ie,{title:e,children:x})})]})})]}):o.jsxs(P,{onOpenChange:i,children:[m,o.jsx(Ue,{children:o.jsx(Le,{asChild:!0,children:o.jsx(re,{title:e,children:x})})})]})};try{S.displayName="ContextMenu",S.__docgenInfo={description:"A menu opened by right-clicking or long-pressing another UI element.",displayName:"ContextMenu",props:{title:{defaultValue:null,description:"The menu title.",name:"title",required:!0,type:{name:"string"}},onOpenChange:{defaultValue:null,description:"Event handler called when the open state of the menu changes.",name:"onOpenChange",required:!1,type:{name:"((open: boolean) => void)"}},trigger:{defaultValue:null,description:`The trigger that can be right-clicked or long-pressed to open the menu.
This must be a component that accepts a ref and spreads props.
https://www.radix-ui.com/primitives/docs/guides/composition`,name:"trigger",required:!0,type:{name:"ReactNode"}},hasAccessibleAlternative:{defaultValue:null,description:`Whether the functionality of this menu is available through some other
keyboard-accessible means. Preferably this should be true, because context
menus are potentially difficult to discover, but if false the trigger will
become focusable so that it can be opened via keyboard navigation.`,name:"hasAccessibleAlternative",required:!0,type:{name:"boolean"}},children:{defaultValue:null,description:"The menu contents.",name:"children",required:!0,type:{name:"ReactNode"}}}}}catch{}const ct={title:"Menu/ContextMenu",component:S,tags:["autodocs"],argTypes:{},args:{}},Fe=e=>o.jsxs(S,{...e,title:"Settings",trigger:o.jsx("div",{style:{borderRadius:24,background:"var(--cpd-color-bg-subtle-secondary)",inlineSize:300,blockSize:200,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",padding:32,boxSizing:"border-box"},children:"Right click or long press to open menu"}),hasAccessibleAlternative:!1,children:[o.jsx(b,{Icon:D,label:"Profile",onSelect:()=>{}}),o.jsx(b,{Icon:U,label:"Notifications",onSelect:()=>{}}),o.jsx(b,{Icon:L,label:"Feedback",onSelect:()=>{}}),o.jsx(le,{}),o.jsx(b,{kind:"critical",Icon:$,label:"Sign out",onSelect:()=>{}})]}),M=Fe.bind({});M.args={};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`args => {
  return <ContextMenuComponent {...args} title="Settings" trigger={<div style={{
    borderRadius: 24,
    background: "var(--cpd-color-bg-subtle-secondary)",
    inlineSize: 300,
    blockSize: 200,
    textAlign: "center",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    padding: 32,
    boxSizing: "border-box"
  }}>
          Right click or long press to open menu
        </div>} hasAccessibleAlternative={false}>
      <MenuItem Icon={UserProfileIcon} label="Profile" onSelect={() => {}} />
      <MenuItem Icon={NotificationsIcon} label="Notifications" onSelect={() => {}} />
      <MenuItem Icon={ChatProblemIcon} label="Feedback" onSelect={() => {}} />
      <Separator />
      <MenuItem kind="critical" Icon={LeaveIcon} label="Sign out" onSelect={() => {}} />
    </ContextMenuComponent>;
}`,...M.parameters?.docs?.source}}};const ut=["ContextMenu"];export{M as ContextMenu,ut as __namedExportsOrder,ct as default};
