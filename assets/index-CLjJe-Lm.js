import{_ as F,b as U}from"./index-Cmw95SmN.js";import{r as t}from"./index-Cu9bd8lq.js";import{$ as ae,a as D,b as q}from"./index-tFWdirwu.js";import{$ as A}from"./index-BHpG8fra.js";const se=t.forwardRef((e,r)=>t.createElement(A.label,F({},e,{ref:r,onMouseDown:o=>{var n;(n=e.onMouseDown)===null||n===void 0||n.call(e,o),!o.defaultPrevented&&o.detail>1&&o.preventDefault()}}))),[G,De]=ae("Form"),J="Form",[ce,V]=G(J),[ie,Q]=G(J),de=t.forwardRef((e,r)=>{const{__scopeForm:o,onClearServerErrors:n=()=>{},...i}=e,d=t.useRef(null),f=U(r,d),[m,v]=t.useState({}),$=t.useCallback(s=>m[s],[m]),g=t.useCallback((s,c)=>v(l=>{var u;return{...l,[s]:{...(u=l[s])!==null&&u!==void 0?u:{},...c}}}),[]),_=t.useCallback(s=>{v(c=>({...c,[s]:void 0})),a(c=>({...c,[s]:{}}))},[]),[C,E]=t.useState({}),M=t.useCallback(s=>{var c;return(c=C[s])!==null&&c!==void 0?c:[]},[C]),b=t.useCallback((s,c)=>{E(l=>{var u;return{...l,[s]:[...(u=l[s])!==null&&u!==void 0?u:[],c]}})},[]),p=t.useCallback((s,c)=>{E(l=>{var u;return{...l,[s]:((u=l[s])!==null&&u!==void 0?u:[]).filter(w=>w.id!==c)}})},[]),[I,a]=t.useState({}),h=t.useCallback(s=>{var c;return(c=I[s])!==null&&c!==void 0?c:{}},[I]),y=t.useCallback((s,c)=>{a(l=>{var u;return{...l,[s]:{...(u=l[s])!==null&&u!==void 0?u:{},...c}}})},[]),[R,x]=t.useState({}),O=t.useCallback((s,c)=>{x(l=>{const u=new Set(l[s]).add(c);return{...l,[s]:u}})},[]),P=t.useCallback((s,c)=>{x(l=>{const u=new Set(l[s]);return u.delete(c),{...l,[s]:u}})},[]),T=t.useCallback(s=>{var c;return Array.from((c=R[s])!==null&&c!==void 0?c:[]).join(" ")||void 0},[R]);return t.createElement(ce,{scope:o,getFieldValidity:$,onFieldValidityChange:g,getFieldCustomMatcherEntries:M,onFieldCustomMatcherEntryAdd:b,onFieldCustomMatcherEntryRemove:p,getFieldCustomErrors:h,onFieldCustomErrorsChange:y,onFieldValiditionClear:_},t.createElement(ie,{scope:o,onFieldMessageIdAdd:O,onFieldMessageIdRemove:P,getFieldDescription:T},t.createElement(A.form,F({},i,{ref:f,onInvalid:D(e.onInvalid,s=>{const c=X(s.currentTarget);c===s.target&&c.focus(),s.preventDefault()}),onSubmit:D(e.onSubmit,n,{checkForDefaultPrevented:!1}),onReset:D(e.onReset,n)}))))}),W="FormField",[le,k]=G(W),ue=t.forwardRef((e,r)=>{const{__scopeForm:o,name:n,serverInvalid:i=!1,...d}=e,m=V(W,o).getFieldValidity(n),v=q();return t.createElement(le,{scope:o,id:v,name:n,serverInvalid:i},t.createElement(A.div,F({"data-valid":H(m,i),"data-invalid":K(m,i)},d,{ref:r})))}),Y="FormLabel",me=t.forwardRef((e,r)=>{const{__scopeForm:o,...n}=e,i=V(Y,o),d=k(Y,o),f=n.htmlFor||d.id,m=i.getFieldValidity(d.name);return t.createElement(se,F({"data-valid":H(m,d.serverInvalid),"data-invalid":K(m,d.serverInvalid)},n,{ref:r,htmlFor:f}))}),B="FormControl",fe=t.forwardRef((e,r)=>{const{__scopeForm:o,...n}=e,i=V(B,o),d=k(B,o),f=Q(B,o),m=t.useRef(null),v=U(r,m),$=n.name||d.name,g=n.id||d.id,_=i.getFieldCustomMatcherEntries($),{onFieldValidityChange:C,onFieldCustomErrorsChange:E,onFieldValiditionClear:M}=i,b=t.useCallback(async a=>{if(Z(a.validity)){const l=j(a.validity);C($,l);return}const h=a.form?new FormData(a.form):new FormData,y=[a.value,h],R=[],x=[];_.forEach(l=>{ye(l,y)?x.push(l):Me(l)&&R.push(l)});const O=R.map(({id:l,match:u})=>[l,u(...y)]),P=Object.fromEntries(O),T=Object.values(P).some(Boolean),s=T;a.setCustomValidity(s?S:"");const c=j(a.validity);if(C($,c),E($,P),!T&&x.length>0){const l=x.map(({id:oe,match:re})=>re(...y).then(ne=>[oe,ne])),u=await Promise.all(l),w=Object.fromEntries(u),ee=Object.values(w).some(Boolean);a.setCustomValidity(ee?S:"");const te=j(a.validity);C($,te),E($,w)}},[_,$,E,C]);t.useEffect(()=>{const a=m.current;if(a){const h=()=>b(a);return a.addEventListener("change",h),()=>a.removeEventListener("change",h)}},[b]);const p=t.useCallback(()=>{const a=m.current;a&&(a.setCustomValidity(""),M($))},[$,M]);t.useEffect(()=>{var a;const h=(a=m.current)===null||a===void 0?void 0:a.form;if(h)return h.addEventListener("reset",p),()=>h.removeEventListener("reset",p)},[p]),t.useEffect(()=>{const a=m.current,h=a?.closest("form");if(h&&d.serverInvalid){const y=X(h);y===a&&y.focus()}},[d.serverInvalid]);const I=i.getFieldValidity($);return t.createElement(A.input,F({"data-valid":H(I,d.serverInvalid),"data-invalid":K(I,d.serverInvalid),"aria-invalid":d.serverInvalid?!0:void 0,"aria-describedby":f.getFieldDescription($),title:""},n,{ref:v,id:g,name:$,onInvalid:D(e.onInvalid,a=>{const h=a.currentTarget;b(h)}),onChange:D(e.onChange,a=>{p()})}))}),S="This value is not valid",$e={badInput:S,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},L="FormMessage",ve=t.forwardRef((e,r)=>{const{match:o,name:n,...i}=e,d=k(L,e.__scopeForm),f=n??d.name;return o===void 0?t.createElement(N,F({},i,{ref:r,name:f}),e.children||S):typeof o=="function"?t.createElement(Ce,F({match:o},i,{ref:r,name:f})):t.createElement(he,F({match:o},i,{ref:r,name:f}))}),he=t.forwardRef((e,r)=>{const{match:o,forceMatch:n=!1,name:i,children:d,...f}=e,v=V(L,f.__scopeForm).getFieldValidity(i);return n||v?.[o]?t.createElement(N,F({ref:r},f,{name:i}),d??$e[o]):null}),Ce=t.forwardRef((e,r)=>{const{match:o,forceMatch:n=!1,name:i,id:d,children:f,...m}=e,v=V(L,m.__scopeForm),$=t.useRef(null),g=U(r,$),_=q(),C=d??_,E=t.useMemo(()=>({id:C,match:o}),[C,o]),{onFieldCustomMatcherEntryAdd:M,onFieldCustomMatcherEntryRemove:b}=v;t.useEffect(()=>(M(i,E),()=>b(i,E.id)),[E,i,M,b]);const p=v.getFieldValidity(i),a=v.getFieldCustomErrors(i)[C];return n||p&&!Z(p)&&a?t.createElement(N,F({id:C,ref:g},m,{name:i}),f??S):null}),N=t.forwardRef((e,r)=>{const{__scopeForm:o,id:n,name:i,...d}=e,f=Q(L,o),m=q(),v=n??m,{onFieldMessageIdAdd:$,onFieldMessageIdRemove:g}=f;return t.useEffect(()=>($(i,v),()=>g(i,v)),[i,v,$,g]),t.createElement(A.span,F({id:v},d,{ref:r}))}),z="FormValidityState",Fe=e=>{const{__scopeForm:r,name:o,children:n}=e,i=V(z,r),d=k(z,r),f=o??d.name,m=i.getFieldValidity(f);return t.createElement(t.Fragment,null,n(m))},Ee=t.forwardRef((e,r)=>{const{__scopeForm:o,...n}=e;return t.createElement(A.button,F({type:"submit"},n,{ref:r}))});function j(e){const r={};for(const o in e)r[o]=e[o];return r}function pe(e){return e instanceof HTMLElement}function ge(e){return"validity"in e}function be(e){return ge(e)&&(e.validity.valid===!1||e.getAttribute("aria-invalid")==="true")}function X(e){const r=e.elements,[o]=Array.from(r).filter(pe).filter(be);return o}function ye(e,r){return e.match.constructor.name==="AsyncFunction"||_e(e.match,r)}function Me(e){return e.match.constructor.name==="Function"}function _e(e,r){return e(...r)instanceof Promise}function Z(e){let r=!1;for(const o in e){const n=o;if(n!=="valid"&&n!=="customError"&&e[n]){r=!0;break}}return r}function H(e,r){if(e?.valid===!0&&!r)return!0}function K(e,r){if(e?.valid===!1||r)return!0}const Se=de,Pe=ue,Te=me,we=fe,ke=ve,Le=Fe,Oe=Ee;export{de as $,we as a,Oe as b,Le as c,Se as d,Pe as e,Te as f,ke as g};
