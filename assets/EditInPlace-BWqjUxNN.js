import{j as t}from"./jsx-runtime-DoxjgJx5.js";import{c as a}from"./index-C2KoGaFq.js";import{r as n,a as u}from"./index-Cu9bd8lq.js";import{T as R}from"./Text-BTQEANK3.js";import{u as d}from"./useId-D5m2XpUu.js";import{S as g}from"./check-CXsFGzWm.js";import{S as P}from"./close-D55JIkKE.js";import{S as D}from"./error-YokBWoNX.js";import{I as F}from"./InlineSpinner-BZBYCXgP.js";const A="_container_10o4t_17",W="_label_10o4t_21",z="_controls_10o4t_27",G="_button_10o4t_32",H="_control_10o4t_27",e={container:A,label:W,controls:z,"button-group":"_button-group_10o4t_32",button:G,"primary-button":"_primary-button_10o4t_51","primary-button-disabled":"_primary-button-disabled_10o4t_60",control:H,"container-show-buttons":"_container-show-buttons_10o4t_79","container-error":"_container-error_10o4t_84","caption-line":"_caption-line_10o4t_92","caption-icon":"_caption-icon_10o4t_99","caption-icon-error":"_caption-icon-error_10o4t_105","caption-icon-saved":"_caption-icon-saved_10o4t_109","caption-text":"_caption-text_10o4t_130","caption-text-error":"_caption-text-error_10o4t_135","caption-text-saved":"_caption-text-saved_10o4t_139","caption-text-saving":"_caption-text-saving_10o4t_143"},y=n.forwardRef(function({className:S,label:N,onSave:p,onCancel:m,saveButtonLabel:w,cancelButtonLabel:T,disableSaveButton:b,error:o,savedLabel:f,savingLabel:q,...I},V){const l=d(),_=d(),h=d(),[C,i]=u.useState(!1),[s,x]=u.useState(!1),E=a(e.container,S,{[e["container-error"]]:!!o,[e["container-show-buttons"]]:s}),r=n.useRef(null),v=n.useRef(null),c=n.useRef(null);u.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const B=n.useCallback(async k=>{k.preventDefault();try{x(!0),await p(),v.current?.blur(),i(!0),r.current=setTimeout(()=>{i(!1)},2e3)}catch{}finally{x(!1)}},[i,p,r]),L=n.useCallback(()=>{c.current?.blur(),m()},[c,m]);return t.jsxs("form",{className:E,id:l,onSubmit:B,children:[t.jsx("div",{className:e.label,id:_,children:N}),t.jsxs("div",{className:e.controls,children:[t.jsx(R,{ref:V,...I,className:e.control,"aria-labelledby":_,"aria-invalid":!!o,"aria-errormessage":o?h:void 0,disabled:s}),t.jsxs("div",{className:e["button-group"],children:[t.jsx("button",{type:"submit",className:a(e.button,e["primary-button"],{[e["primary-button-disabled"]]:b}),ref:v,"aria-controls":l,"aria-label":w,disabled:b||s,children:t.jsx(g,{})}),t.jsx("button",{type:"button",role:"button",ref:c,className:e.button,onClick:L,"aria-controls":l,"aria-label":T,disabled:s,children:t.jsx(P,{})})]})]}),o&&t.jsxs("div",{className:e["caption-line"],children:[t.jsx(D,{className:a(e["caption-icon"],e["caption-icon-error"])}),t.jsx("span",{id:h,className:a(e["caption-text"],e["caption-text-error"]),children:o})]}),s&&t.jsxs("div",{className:e["caption-line"],children:[t.jsx(F,{}),t.jsx("span",{className:a(e["caption-text"],e["caption-text-saving"]),children:q})]}),f&&C&&t.jsxs("div",{className:e["caption-line"],children:[t.jsx("div",{className:a(e["caption-icon"],e["caption-icon-saved"]),children:t.jsx(g,{})}),t.jsx("span",{className:a(e["caption-text"],e["caption-text-saved"]),children:f})]})]})});try{y.displayName="EditInPlace",y.__docgenInfo={description:`A text box with save/cancel buttons that appear when the field is active.
Since thios control has its own 'save' button, it should *not* appear as part
of a larger form: it exists as its own form that submits separately.`,displayName:"EditInPlace",props:{className:{defaultValue:null,description:"The CSS class name.",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"The content of the text box",name:"value",required:!1,type:{name:"string | (string & readonly string[])"}},label:{defaultValue:null,description:"The label for the control",name:"label",required:!0,type:{name:"string"}},enableLigatures:{defaultValue:null,description:`Enable contextual alternate ligatures on input text
For example on an in-place editing field
https://github.com/rsms/inter/issues/222
https://github.com/rsms/inter/blob/master/src/features/calt.fea`,name:"enableLigatures",required:!1,type:{name:"boolean"}},onSave:{defaultValue:null,description:"Callback for when the user confirms the change",name:"onSave",required:!0,type:{name:"() => Promise<void>"}},onCancel:{defaultValue:null,description:"Calback for when the user wishes to cancel the change",name:"onCancel",required:!0,type:{name:"() => void"}},saveButtonLabel:{defaultValue:null,description:"The label for the save button",name:"saveButtonLabel",required:!0,type:{name:"string"}},cancelButtonLabel:{defaultValue:null,description:"The label for the cancel button",name:"cancelButtonLabel",required:!1,type:{name:"string"}},disableSaveButton:{defaultValue:null,description:`True to disable the save button, false to enable.
Default: false (enabled)`,name:"disableSaveButton",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:`Error message to be displayed below the box. If supplied, will disable the
save button.`,name:"error",required:!1,type:{name:"string"}},savedLabel:{defaultValue:null,description:`Label to be displayed by the green check at the bottom. Will only be displayed
for 2 seconds after the onSave callback promise resolves successfully.`,name:"savedLabel",required:!1,type:{name:"string"}},savingLabel:{defaultValue:null,description:"The label for the 'in progress' saving caption",name:"savingLabel",required:!0,type:{name:"string"}}}}}catch{}export{y as E};
